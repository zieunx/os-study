# System Structure & Program Execution

<aside>
💡 본격적으로 들어가기에 앞서 하드웨어 관련하여 배우고 넘어가는 시간

</aside>

![스크린샷 2023-01-03 오전 10.11.43.png](System%20Structure%20&%20Program%20Execution%20e64c1a6d854049f39894c81047b0d683/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-03_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_10.11.43.png)

device 에는 각각 I/O device controller 가 붙어있음. cpu 역할을 해줌

![스크린샷 2023-01-03 오전 10.13.45.png](System%20Structure%20&%20Program%20Execution%20e64c1a6d854049f39894c81047b0d683/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-03_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_10.13.45.png)

interrupt line : 메모리와 일함. i/o 디바이스에 접근

cpu 쪽에서 device controller 에 필요한 요청을 보내는 인스트럭션이 별도로 있음

cpu: 메모리에 올라와있는 기계어를 하나씩 읽어와서 처리. 메모리 주소를 가리키고있는 레지스터를 통하여 읽어옴

메모리: 인스트럭션만 실행

Mode Bit

- 1: 제한된 인스트럭션만 cpu에서 실행할 수 있음
- 0: 모니터모드 = 커널모드 = 시스템모드, OS 코드 수행, 보안(보호)를 목적으로 인스트럭션 set을나눠놓음

timer

- 특정 프로그램이 cpu를 독점하는 것을 막아준다. 인스트럭션의 시간이 끝나면 cpu에 인터럽트한다. 메모리는 인터럽트라인을 통하여 체크하다가 시간이 끝난 정보를 받음

인터럽트

- i/o 요청을 할 때는 소프트웨어 인터럽트(트랩), i/o 가 끝나면 하드웨어 인터럽트를 통해 알려줌
- 일반적으로 ‘인터럽트’ 라고하면 기본이 하드웨어 인터럽트
- 현대의 운영체제는 인터럽트에 의해 구동된다
- 인터럽트 종류마다 해야하는 일이 다르다. 운영체제에 코드로 정의되어있음. 그 코드를 인터럽트 처리 루틴 이라고 함
- 인터럽트 종류마다 함수의 주소를 정의해놓는 것을 인터럽트 벡터 라고 함

### 동기식 입출력과 비동기식 입출력

동기식 입출력 synchronous I/O

- io 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감
- 구현 1
    - i/o 가 끝날 때 까지 cpu를 낭비시킴
    - 매 시점 하나의 i/o만 발생
- 구현 2
    - io가 완료될 때 까지 해당 프로그램에게서 cpu를 빼앗음
    - io처리를 기다리는 줄에 그 프로그램을 줄 세움
    - 다른 프로그램에게 cpu를 줌

비동기식 입출력 asynchronous I/O

- io가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감. 즉, 다른 일을 할 수 있음

(두 경우 모두 io 완료는 인터럽트로 알려줌)

### DMA (direct memory access)

- 빠른 입출력 장치를 메모리에 가까운 속도로 처리하기 위해 사용

### 저장장치 계층 구조

![스크린샷 2023-01-03 오전 11.25.58.png](System%20Structure%20&%20Program%20Execution%20e64c1a6d854049f39894c81047b0d683/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-03_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.25.58.png)

- 위로갈수록 빠르지만 비싸다
- 속도를 빠르게하기위해서 캐시메모리에 올려놓고 쓰는 것을 캐싱이라고한다

![스크린샷 2023-01-03 오전 11.28.36.png](System%20Structure%20&%20Program%20Execution%20e64c1a6d854049f39894c81047b0d683/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-01-03_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.28.36.png)

Swap area: 종료되면 의미가 없어짐 휘발성

File system: 비휘발성 영구 공간